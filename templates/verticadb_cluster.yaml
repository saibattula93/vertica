apiVersion: vertica.com/v1
kind: VerticaDB
metadata:
  name: {{ .Values.verticaDB.metadata.name }}
  namespace: {{ .Values.namespace }}
spec:
  subclusters:
    - name: {{ .Values.verticaDB.subclusters.sc1.name }}
      size: {{ .Values.verticaDB.subclusters.sc1.size }}
      serviceType: {{ .Values.verticaDB.subclusters.sc1.serviceType }}
      resources:
        limits:
          cpu: {{ .Values.verticaDB.subclusters.resources.limits.cpu }}
          memory: {{ .Values.verticaDB.subclusters.resources.limits.memory }}
        requests:
          cpu: {{ .Values.verticaDB.subclusters.resources.requests.cpu }}
          memory: {{ .Values.verticaDB.subclusters.resources.requests.memory }}
  image: {{ .Values.verticaDB.image.repository }}
  tag: {{ .Values.verticaDB.image.tag }}
  local:
    requestSize: {{ .Values.verticaDB.local.requestSize }}
  communal:
    path: {{ .Values.verticaDB.communal.path }}
  volumeMounts:
    - name: communal-storage
      mountPath: {{ .Values.verticaDB.volumeMounts.communalStorageMountPath }}
  volumes:
    - name: communal-storage
      persistentVolumeClaim:
        claimName: {{ .Values.verticaDB.volumes.pvcClaimName }}
        
